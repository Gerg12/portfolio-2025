"use strict";var registerBlockType=wp.blocks.registerBlockType,_wp$editor=wp.editor,RichText=_wp$editor.RichText,MediaUpload=_wp$editor.MediaUpload,_wp$components=wp.components,Button=_wp$components.Button,TextControl=_wp$components.TextControl,withSelect=wp.data.withSelect;registerBlockType("custom-block-plugin/project-section",{title:"Project Section",icon:"portfolio",category:"common",attributes:{imageUrl:{type:"string",default:""},imageAlt:{type:"string",default:""},blockText:{type:"string",default:""},blockTitle:{type:"string",default:""},allProjectsLink:{type:"string",default:""},projects:{type:"array",default:[]}},edit:withSelect(function(e){var e=e("core").getEntityRecords,t=e("taxonomy","category",{slug:"featured"}),l=[];return{categories:t,projects:(l=t&&0<t.length?e("postType","project",{per_page:5,categories:t[0].id}):l)||[]}})(function(e){var t=e.attributes,l=e.setAttributes,e=e.projects,c=t.imageUrl,n=(t.imageAlt,t.blockText),r=t.blockTitle,t=t.allProjectsLink;return e&&0<e.length&&l({projects:e}),e?wp.element.createElement("div",{className:"project-section__wrapper"},wp.element.createElement("div",{className:"project-section__inner"},wp.element.createElement("div",{className:"project-section__left-column"},wp.element.createElement(MediaUpload,{onSelect:function(e){l({imageUrl:e.url,imageAlt:e.alt})},type:"image",value:c,render:function(e){e=e.open;return wp.element.createElement(Button,{onClick:e},"Select Image")}}),c&&wp.element.createElement("img",{src:c,alt:"Project Image",style:{maxWidth:"100%"}}),wp.element.createElement(RichText,{className:"project-section__text",tagName:"p",value:n,onChange:function(e){l({blockText:e})},placeholder:"Enter block text"})),wp.element.createElement("div",{className:"project-section__right-column"},wp.element.createElement(RichText,{className:"project-section__block-title",tagName:"h2",value:r,onChange:function(e){l({blockTitle:e})},placeholder:"Enter block title"}),wp.element.createElement("ul",{className:"project-section__list"},e&&0<e.length?e.map(function(e){return wp.element.createElement("li",{key:e.id,className:"project-section__item"},wp.element.createElement("h3",{className:"project-section__item-title"},e.title.rendered),wp.element.createElement("div",{className:"project-section__item-row"},wp.element.createElement("div",{className:"project-section__item-subtitle",dangerouslySetInnerHTML:{__html:e.excerpt.rendered}}),wp.element.createElement("a",{href:e.link,className:"project-section__item-link"},"Visit Project")))}):wp.element.createElement("li",null,"No projects found.")),wp.element.createElement(TextControl,{className:"project-section__all-projects-link",value:t,onChange:function(e){l({allProjectsLink:e})},placeholder:"Enter 'See All Projects' link"}),wp.element.createElement("a",{href:t,className:"project-section__all-projects-link-text"},"See All Projects")))):wp.element.createElement("p",null,"Loading projects...")}),save:function(e){var e=e.attributes,t=e.imageUrl,l=e.imageAlt,c=e.blockText,n=e.blockTitle,r=e.allProjectsLink,a=e.projects;return console.log("Attributes in save:",e),wp.element.createElement("div",{className:"project-section__wrapper"},wp.element.createElement("div",{className:"project-section__inner"},wp.element.createElement("div",{className:"project-section__left-column"},t&&wp.element.createElement("img",{src:t,alt:l,className:"project-section__image"}),wp.element.createElement(RichText.Content,{className:"project-section__text",tagName:"p",value:c})),wp.element.createElement("div",{className:"project-section__right-column"},wp.element.createElement(RichText.Content,{className:"project-section__block-title",tagName:"h2",value:n}),wp.element.createElement("ul",{className:"project-section__list"},a&&0<a.length?a.map(function(e){return wp.element.createElement("li",{key:e.id,className:"project-section__item"},wp.element.createElement("h3",{className:"project-section__item-title"},e.title.rendered),wp.element.createElement("div",{className:"project-section__item-row"},wp.element.createElement("div",{className:"project-section__item-subtitle",dangerouslySetInnerHTML:{__html:e.excerpt.rendered}}),wp.element.createElement("a",{href:e.link,className:"project-section__item-link"},"Visit Project")))}):wp.element.createElement("li",null,"No projects found.")),wp.element.createElement("a",{href:r,className:"project-section__all-projects-link-text"},"See All Projects"))))}});
//# sourceMappingURL=project-section.js.map
