{"version":3,"sources":["blocks/project-section.js"],"names":["registerBlockType","wp","blocks","_wp$editor","RichText","MediaUpload","_wp$components","TextControl","Button","withSelect","data","title","icon","category","attributes","imageUrl","type","default","imageAlt","blockText","blockTitle","allProjectsLink","projects","edit","select","_select","categories","getEntityRecords","slug","per_page","id","_ref","setAttributes","onAllProjectsLinkChange","element","createElement","className","onSelect","onClick","open","value","render","maxWidth","tagName","src","alt","style","onChange","placeholder","length","map","project","onBlockTitleChange","rendered","dangerouslySetInnerHTML","excerpt","href","save","_ref3","console","log","Content","key","__html","link"],"mappings":"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","file":"project-section.js","sourcesContent":["const { registerBlockType } = wp.blocks;\nconst {\n\tRichText,\n\tMediaUpload,\n} = wp.editor;\nconst {\n\tButton,\n\tTextControl,\n} = wp.components;\nconst { withSelect } = wp.data;\n\n// Project Section Block\nregisterBlockType(\"custom-block-plugin/project-section\", {\n\ttitle: \"Project Section\",\n\ticon: \"portfolio\",\n\tcategory: \"common\",\n\tattributes: {\n\t\timageUrl: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\timageAlt: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\tblockText: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\tblockTitle: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\tallProjectsLink: {\n\t\t\ttype: \"string\",\n\t\t\tdefault: \"\",\n\t\t},\n\t\tprojects: {\n\t\t\ttype: \"array\",\n\t\t\tdefault: [],\n\t\t},\n\t},\n\tedit: withSelect((select) => {\n\t\tconst { getEntityRecords } = select(\"core\");\n\n\t\t// Fetch categories and projects\n\t\tconst categories = getEntityRecords(\"taxonomy\", \"category\", {\n\t\t\tslug: \"featured\",\n\t\t});\n\n\t\tlet projects = [];\n\t\tif (categories && categories.length > 0) {\n\t\t\tconst featuredCategoryId = categories[0].id;\n\t\t\tprojects = getEntityRecords(\"postType\", \"project\", {\n\t\t\t\tper_page: 5,\n\t\t\t\tcategories: featuredCategoryId,\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tcategories,\n\t\t\tprojects: projects || [],\n\t\t};\n\t})(({ attributes, setAttributes, projects }) => {\n\t\tconst { imageUrl, imageAlt, blockText, blockTitle, allProjectsLink } =\n\t\t\tattributes;\n\n\t\tconst onSelectImage = (media) => {\n\t\t\tsetAttributes({\n\t\t\t\timageUrl: media.url,\n\t\t\t\timageAlt: media.alt,\n\t\t\t});\n\t\t};\n\n\t\tconst onBlockTextChange = (value) => {\n\t\t\tsetAttributes({ blockText: value });\n\t\t};\n\n\t\tconst onBlockTitleChange = (value) => {\n\t\t\tsetAttributes({ blockTitle: value });\n\t\t};\n\n\t\tconst onAllProjectsLinkChange = (value) => {\n\t\t\tsetAttributes({ allProjectsLink: value });\n\t\t};\n\n\t\t// Update projects attribute in block's attributes\n\t\tif (projects && projects.length > 0) {\n\t\t\tsetAttributes({ projects });\n\t\t}\n\n\n\t\tif (!projects) {\n\t\t\treturn <p>Loading projects...</p>;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"project-section__wrapper\">\n\t\t\t\t<div className=\"project-section__inner\">\n\t\t\t\t\t<div className=\"project-section__left-column\">\n\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\t\tonSelect={onSelectImage}\n\t\t\t\t\t\t\t\ttype=\"image\"\n\t\t\t\t\t\t\t\tvalue={imageUrl}\n\t\t\t\t\t\t\t\trender={({ open }) => (\n\t\t\t\t\t\t\t\t\t<Button onClick={open}>Select Image</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{imageUrl && (\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\t\t\talt=\"Project Image\"\n\t\t\t\t\t\t\t\t\tstyle={{ maxWidth: \"100%\" }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"project-section__text\"\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tvalue={blockText}\n\t\t\t\t\t\t\tonChange={onBlockTextChange}\n\t\t\t\t\t\t\tplaceholder=\"Enter block text\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"project-section__right-column\">\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"project-section__block-title\"\n\t\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\t\tvalue={blockTitle}\n\t\t\t\t\t\t\tonChange={onBlockTitleChange}\n\t\t\t\t\t\t\tplaceholder=\"Enter block title\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ul className=\"project-section__list\">\n\t\t\t\t\t\t\t{projects && projects.length > 0 ? (\n\t\t\t\t\t\t\t\tprojects.map((project) => (\n\t\t\t\t\t\t\t\t\t<li key={project.id} className=\"project-section__item\">\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"project-section__item-title\">\n\t\t\t\t\t\t\t\t\t\t\t{project.title.rendered}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"project-section__item-row\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"project-section__item-subtitle\"\n\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t__html: project.excerpt.rendered,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<a href={project.link} className=\"project-section__item-link\">\n\t\t\t\t\t\t\t\t\t\t\t\tVisit Project\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<li>No projects found.</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tclassName=\"project-section__all-projects-link\"\n\t\t\t\t\t\t\tvalue={allProjectsLink}\n\t\t\t\t\t\t\tonChange={onAllProjectsLinkChange}\n\t\t\t\t\t\t\tplaceholder=\"Enter 'See All Projects' link\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={allProjectsLink}\n\t\t\t\t\t\t\tclassName=\"project-section__all-projects-link-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSee All&nbsp;Projects\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}),\n\tsave: ({ attributes }) => {\n\t\tconst {\n\t\t\timageUrl,\n\t\t\timageAlt,\n\t\t\tblockText,\n\t\t\tblockTitle,\n\t\t\tallProjectsLink,\n\t\t\tprojects, // Ensure projects are directly accessible here\n\t\t} = attributes;\n\n\t\tconsole.log(\"Attributes in save:\", attributes);\n\n\t\treturn (\n\t\t\t<div className=\"project-section__wrapper\">\n\t\t\t\t<div className=\"project-section__inner\">\n\t\t\t\t\t<div className=\"project-section__left-column\">\n\t\t\t\t\t\t{imageUrl && (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\t\talt={imageAlt}\n\t\t\t\t\t\t\t\tclassName=\"project-section__image\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\tclassName=\"project-section__text\"\n\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\tvalue={blockText}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"project-section__right-column\">\n\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\tclassName=\"project-section__block-title\"\n\t\t\t\t\t\t\ttagName=\"h2\"\n\t\t\t\t\t\t\tvalue={blockTitle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ul className=\"project-section__list\">\n\t\t\t\t\t\t\t{/* Ensure projects are correctly retrieved */}\n\t\t\t\t\t\t\t{projects && projects.length > 0 ? (\n\t\t\t\t\t\t\t\tprojects.map((project) => (\n\t\t\t\t\t\t\t\t\t<li key={project.id} className=\"project-section__item\">\n\t\t\t\t\t\t\t\t\t\t<h3 className=\"project-section__item-title\">\n\t\t\t\t\t\t\t\t\t\t\t{project.title.rendered}\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t\t<div className=\"project-section__item-row\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"project-section__item-subtitle\"\n\t\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t__html: project.excerpt.rendered,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<a href={project.link} className=\"project-section__item-link\">\n\t\t\t\t\t\t\t\t\t\t\t\tVisit Project\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<li>No projects found.</li>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={allProjectsLink}\n\t\t\t\t\t\t\tclassName=\"project-section__all-projects-link-text\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSee All&nbsp;Projects\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t},\n});"]}